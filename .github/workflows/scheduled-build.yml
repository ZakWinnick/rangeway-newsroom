name: Scheduled Site Build

on:
  schedule:
    # Runs at 6:00 AM Pacific Time (14:00 UTC) every day
    # Pacific Standard Time (PST) is UTC-8, so 6 AM PST = 14:00 UTC
    # Pacific Daylight Time (PDT) is UTC-7, so 6 AM PDT = 13:00 UTC
    # Using 14:00 UTC to align with PST; adjust to 13:00 if needed for PDT
    - cron: '0 14 * * *'

  # Allow manual triggering from the Actions tab
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Trigger GitHub Pages rebuild
        run: |
          echo "Triggering scheduled rebuild at $(date)"

      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Create empty commit to trigger rebuild
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git commit --allow-empty -m "Scheduled build trigger - $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
          git push
